database
	xpositive(symbol)
	xnegative(symbol)
predicates
	run
	prefs (symbol) 
	ask(symbol)
	positive(symbol)
	negative(symbol)
	remember(symbol, symbol)
	clear_facts
goal
	run.
clauses
	run :-write("Отвечать y/n\n"), prefs(X), !,
		write("\nВам больше всего подходит  ", X),	nl, clear_facts.
	run :-write("\n мы не знаем"), clear_facts.     
	positive(X) :- xpositive(X), !.
	positive(X) :- not(negative(X)), !, ask(X).
	negative(X) :- xnegative(X), !.
	ask(X) :-
		write(X, "?\n"),
		readln(Reply),
		remember(X, Reply).
	remember(X, "y") :- asserta(xpositive(X)).         
	remember(X, "n") :- asserta(xnegative(X)), fail.
	clear_facts :- retract(xpositive(_)), fail.
	clear_facts :- retract(xnegative(_)), fail.
	clear_facts :- write("\n press enter"),  readchar(_).

	prefs("Автомобиль исправен"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		positive("Топливо поступает в двигатель?"),
		positive("Компрессия в цилиндрах нормальная?"),
		positive("Датчики двигателя исправны?"),
	        positive("Выхлопная система исправна?"),!.
	        
	prefs("Проблемы с выхлопной системой"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		positive("Топливо поступает в двигатель?"),
		positive("Компрессия в цилиндрах нормальная?"),
		positive("Датчики двигателя исправны?"),
	        negative("Выхлопная система исправна?"),!.

	prefs("Забит каталитический нейтрализатор"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		positive("Топливо поступает в двигатель?"),
		positive("Компрессия в цилиндрах нормальная?"),
		negative("Датчики двигателя исправны?"),
		positive("Каталитический нейтрализатор забит?"),!.
	        
	prefs("Автомобиль исправен"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		positive("Топливо поступает в двигатель?"),
		positive("Компрессия в цилиндрах нормальная?"),
		negative("Датчики двигателя исправны?"),
		negative("Каталитический нейтрализатор забит?"),
		positive("Глушитель исправен?"),!.

	prefs("Проблемы с глушителем"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		positive("Топливо поступает в двигатель?"),
		positive("Компрессия в цилиндрах нормальная?"),
		negative("Датчики двигателя исправны?"),
		negative("Каталитический нейтрализатор забит?"),
		negative("Глушитель исправен?"),!.
	     
	prefs("Проблемы с двигателем"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		positive("Топливо поступает в двигатель?"),
		negative("Компрессия в цилиндрах нормальная?"),
		positive("Проводка ЭБУ в порядке?"),
		positive("Датчик положения коленвала исправен?"),!.

	prefs("проблемам с датчиком положения коленвала"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		positive("Топливо поступает в двигатель?"),
		negative("Компрессия в цилиндрах нормальная?"),
		positive("Проводка ЭБУ в порядке?"),
		negative("Датчик положения коленвала исправен?"),!.

	prefs("Проблема с проводкой ЭБУ"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		positive("Топливо поступает в двигатель?"),
		negative("Компрессия в цилиндрах нормальная?"),
		negative("Проводка ЭБУ в порядке?"),!.

	prefs("Проблема с форсунками"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		negative("Топливо поступает в двигатель?"),
		positive("Форсунки исправны?"),
		positive("Топливнаая рампа исправна?"),!.

	prefs("Проблемы с топливной рампой"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		negative("Топливо поступает в двигатель?"),
		positive("Форсунки исправны?"),
		negative("Топливнаая рампа исправна?"),!.

	prefs("Проблема с форсунками"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		positive("Есть ли искра в свечах зажигания?"),
		negative("Топливо поступает в двигатель?"),
		negative("Форсунки исправны?"),!.

	prefs("Проблемы с катушкой зажигания"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		negative("Есть ли искра в свечах зажигания?"),
		positive("Катушка зажигания исправна"),
		positive("Провода зажигания впорядке?"),!.

	prefs("Проблемы с проводами зажигания"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		negative("Есть ли искра в свечах зажигания?"),
		positive("Катушка зажигания исправна"),
		negative("Провода зажигания впорядке?"),!.

	prefs("Проблемы с катушкой зажигания"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        positive("Аккамулятор заряжен?"),
		negative("Есть ли искра в свечах зажигания?"),
		negative("Катушка зажигания исправна"),!.

	prefs("Проблемы с генератором"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        negative("Аккамулятор заряжен?"),
		positive("Генератор исправен?"),
		positive("Ремень генератора в порядке?"),!.
		
	prefs("Проблемы с ремнем генератора"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        negative("Аккамулятор заряжен?"),
		positive("Генератор исправен?"),
		negative("Ремень генератора в порядке?"),!.

	prefs("Проблемы с генератором"):-
	        positive("Двигатель запускается?"),
	        positive("Уровень топлива нормальный?"),
	        negative("Аккамулятор заряжен?"),
		negative("Генератор исправен?"),!.

	prefs("Проблемы с катушкой зажигания"):-
	        positive("Двигатель запускается?"),
	        negative("Уровень топлива нормальный?"),
		positive("Топливный насос исправен?"),
		positive("Топливный фильтр чистый?"),!.

	prefs("Загрязнен топливный фильтр"):-
	        positive("Двигатель запускается?"),
	        negative("Уровень топлива нормальный?"),
		positive("Топливный насос исправен?"),
		negative("Топливный фильтр чистый?"),!.	

	prefs("Проблемы с топливным насосом"):-
	        positive("Двигатель запускается?"),
	        negative("Уровень топлива нормальный?"),
		negative("Топливный насос исправен?"),!.	

	prefs("Проблемы с двигателем"):-
	        negative("Двигатель запускается?"),
	        positive("Аккумулятор заряжен?"),
		positive("Стартер исправен?"),
		positive("Соединения проводов впорядке?"),
		positive("Блокировка рулевого колеса снята?"),!.

	prefs("заблокированно рулевое колесо"):-
	        negative("Двигатель запускается?"),
	        positive("Аккумулятор заряжен?"),
		positive("Стартер исправен?"),
		positive("Соединения проводов впорядке?"),
		negative("Блокировка рулевого колеса снята?"),!.

	prefs("Проблемы с генератором"):-
	        negative("Двигатель запускается?"),
	        positive("Аккумулятор заряжен?"),
		positive("Стартер исправен?"),
		negative("Соединения проводов впореядке?"),
		positive("Предохранители и реле в порядке?"),!.

	prefs("Проблемы с предохранителем и реле"):-
	        negative("Двигатель запускается?"),
	        positive("Аккумулятор заряжен?"),
		positive("Стартер исправен?"),
		negative("Соединения проводов впореядке?"),
		negative("Предохранители и реле в порядке?"),!.

	prefs("Проблемы с генератором"):-
	        negative("Двигатель запускается?"),
	        positive("Аккумулятор заряжен?"),
		negative("Стартер исправен?"),
		positive("Втягивающее реле стартера в порядке?"),
		positive("Бендекс стартера в порядке?"),!.

	prefs("Проблемы с бендексом стартера"):-
	        negative("Двигатель запускается?"),
	        positive("Аккумулятор заряжен?"),
		negative("Стартер исправен?"),
		positive("Втягивающее реле стартера в порядке?"),
		negative("Бендекс стартера в порядке?"),!.

	prefs("Проблемы с втявающим реле стартера"):-
	        negative("Двигатель запускается?"),
	        positive("Аккумулятор заряжен?"),
		negative("Стартер исправен?"),
		negative("Втягивающее реле стартера в порядке?"),!.

	prefs("Автомобиль исправен"):-
	        negative("Двигатель запускается?"),
	        negative("Аккумулятор заряжен?"),
		positive("Генератор исправен?"),
		positive("Ремень генератора в порядке?"),!.

	prefs("Проблемы с ремнем генератора"):-
	        negative("Двигатель запускается?"),
	        negative("Аккумулятор заряжен?"),
		positive("Генератор исправен?"),
		negative("Ремень генератора в порядке?"),!.

	
	prefs("Проблемы с генератором"):-
	        negative("Двигатель запускается?"),
	        negative("Аккумулятор заряжен?"),
		negative("Генератор исправен?"),!.


